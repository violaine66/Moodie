<%= render "shared/banner2" %>
<div class="container text-center" id="calendar">
  <div class="title-card"><h1>Mon calendrier</h1></div>
    <div class="justify-content-center">
      <div class="calendar-container col-10 col-lg-6">
        <%= month_calendar(locale: :fr, events: @moods) do |date, moods| %>
          <div class="day-container">
            <div class="day-number"><%= date.day %></div>
            <div class="mood-circle-wrapper">
              <% if moods.any? %>
                <% last_mood = moods.last %>  <%# Prend la dernière humeur enregistrée %>
                <div class="mood-circle">
                <% journal_post = JournalPost.find_by(date: date) %>
                <% if journal_post.present? %>
                  <%= link_to journal_post_path(journal_post) do %>
                    <img src="<%= last_mood.emoji_url %>" alt="Mood emoji" class="mood-emoji">
                  <% end %>
                <% else %>
                  <%= link_to new_journal_post_path(date: date) do %>
                    <img src="<%= last_mood.emoji_url %>" alt="Mood emoji" class="mood-emoji">
                  <% end %>
                <% end %>
              </div>
              <% else %>
                <div class="mood-circle empty"></div> <%# Cercle invisible mais qui prend de la place %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
</div>
